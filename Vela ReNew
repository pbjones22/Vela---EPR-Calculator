<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vela EPR Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; }
    label, select { display: block; margin: 10px 0; }
    .output, .weight-display { margin-top: 20px; font-weight: bold; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Vela EPR Calculator</h1>

  <label for="productionRegion">Select Production Region:</label>
  <select id="productionRegion">
    <option value="italy">Italy</option>
  </select>

  <label for="materialType">Select Bag Style / Material:</label>
  <select id="materialType">
    <option value="vela">Vela Classic (paper)</option>
    <option value="ldpe">Virgin LDPE Polybag (plastic)</option>
  </select>

  <label for="bagSize">Select Bag Size:</label>
  <select id="bagSize">
    <option value="10x15">10x15 (2XS)</option>
    <option value="15x20">15x20 (XS)</option>
    <option value="20x25">20x25 (S)</option>
    <option value="25x30">25x30 (M)</option>
    <option value="30x40">30x40 (L)</option>
    <option value="35x50">35x50 (XL)</option>
    <option value="40x60">40x60 (2XL)</option>
    <option value="50x75">50x75 (3XL)</option>
  </select>

  <div class="weight-display">Weight (kg): <span id="weightDisplay">0.0018</span></div>

  <label for="salesRegion">Select Country Where Bag Is Sold:</label>
  <select id="salesRegion">
    <option value="france">France</option>
    <option value="germany">Germany</option>
    <option value="italy">Italy</option>
    <option value="spain">Spain</option>
    <option value="netherlands">Netherlands</option>
    <option value="uk">United Kingdom</option>
    <option value="belgium">Belgium</option>
    <option value="austria">Austria</option>
  </select>

  <div class="output" id="results"></div>

  <script>
    const weights = {
      "10x15": 0.0018,
      "15x20": 0.0032,
      "20x25": 0.0046,
      "25x30": 0.0066,
      "30x40": 0.0103,
      "35x50": 0.0146,
      "40x60": 0.0207,
      "50x75": 0.0298
    };

    const feeRates = {
      france:    { paper: { epr: 120, tax: 0 }, plastic: { epr: 140, tax: 250 } },
      germany:   { paper: { epr: 130, tax: 0 }, plastic: { epr: 150, tax: 280 } },
      italy:     { paper: { epr: 110, tax: 0 }, plastic: { epr: 130, tax: 240 } },
      spain:     { paper: { epr: 100, tax: 0 }, plastic: { epr: 120, tax: 230 } },
      netherlands:{ paper: { epr: 140, tax: 0 }, plastic: { epr: 160, tax: 300 } },
      uk:        { paper: { epr: 130, tax: 0 }, plastic: { epr: 140, tax: 270 } },
      belgium:   { paper: { epr: 120, tax: 0 }, plastic: { epr: 150, tax: 260 } },
      austria:   { paper: { epr: 110, tax: 0 }, plastic: { epr: 130, tax: 250 } }
    };

    function updateWeightAndFees() {
      const size = document.getElementById('bagSize').value;
      const weight = weights[size] || 0;
      document.getElementById('weightDisplay').textContent = weight.toFixed(4);
      calculateFees(weight);
    }

    function calculateFees(weight) {
      const material = document.getElementById('materialType').value;
      const salesRegion = document.getElementById('salesRegion').value;

      const materialType = material === 'vela' ? 'paper' : 'plastic';
      const fees = feeRates[salesRegion][materialType];

      const epr = (fees.epr / 1000) * weight;
      const tax = (fees.tax / 1000) * weight;
      const total = epr + tax;

      document.getElementById('results').innerText =
        `EPR Fee: €${epr.toFixed(4)}\n` +
        `Plastic Tax: €${tax.toFixed(4)}\n` +
        `Total Cost per Bag: €${total.toFixed(4)}`;
    }

    document.getElementById('productionRegion').addEventListener('change', updateWeightAndFees);
    document.getElementById('materialType').addEventListener('change', updateWeightAndFees);
    document.getElementById('bagSize').addEventListener('change', updateWeightAndFees);
    document.getElementById('salesRegion').addEventListener('change', updateWeightAndFees);

    updateWeightAndFees();
  </script>
</body>
</html>
